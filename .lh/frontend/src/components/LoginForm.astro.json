{
    "sourceFile": "frontend/src/components/LoginForm.astro",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1762537690914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762538023927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n     justify-content: center;\r\n     flex-direction: column;\r\n   }\r\n \r\n-  #form-signup {\r\n+  #form-login {\r\n     width: fit-content;\r\n     display: flex;\r\n     flex-direction: column;\r\n     justify-content: center;\r\n"
                },
                {
                    "date": 1762538125975,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,8 +8,43 @@\n     <input type=\"text\" name=\"username\" placeholder=\"Username\" required />\r\n     <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\r\n     <button type=\"submit\">Log in</button>\r\n   </form>\r\n+  <script>\r\n+        // Login\r\n+      const loginForm = document.getElementById(\r\n+        \"form-login\"\r\n+      ) as HTMLFormElement;\r\n+      loginForm.addEventListener(\"submit\", async (e) => {\r\n+        e.preventDefault();\r\n+        const formData = new FormData(loginForm);\r\n+        const username = formData.get(\"username\");\r\n+        const password = formData.get(\"password\");\r\n+\r\n+        try {\r\n+          const res = await fetch(\"http://localhost:3500/users/login\", {\r\n+            method: \"POST\",\r\n+            credentials: \"include\", // include cookies\r\n+            headers: {\r\n+              \"Content-type\": \"application/json\",\r\n+            },\r\n+            body: JSON.stringify({\r\n+              username,\r\n+              password,\r\n+            }),\r\n+          });\r\n+          const data = await res.json();\r\n+          if (!res.ok) {\r\n+            console.error(data.message);\r\n+            return;\r\n+          }\r\n+          window.location.href = \"/profile\"; // Redirect to profile page\r\n+        } catch (err) {\r\n+          // Server is down\r\n+          console.error(err);\r\n+        }\r\n+      });\r\n+      </script>\r\n </div>\r\n \r\n <style>\r\n   .form-container {\r\n"
                },
                {
                    "date": 1762538253947,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n     <button type=\"submit\">Log in</button>\r\n   </form>\r\n   <script>\r\n     // Login\r\n-    const loginForm = document.getElementById(\"form-login\") as HTMLFormElement;\r\n+    const loginForm = document.getElementById(\"form-login\");\r\n     loginForm.addEventListener(\"submit\", async (e) => {\r\n       e.preventDefault();\r\n       const formData = new FormData(loginForm);\r\n       const username = formData.get(\"username\");\r\n"
                },
                {
                    "date": 1762538640050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n     <button type=\"submit\">Log in</button>\r\n   </form>\r\n   <script>\r\n     // Login\r\n-    const loginForm = document.getElementById(\"form-login\");\r\n+    const loginForm = document.getElementById(\"form-login\") as HTMLFormElement;\r\n     loginForm.addEventListener(\"submit\", async (e) => {\r\n       e.preventDefault();\r\n       const formData = new FormData(loginForm);\r\n       const username = formData.get(\"username\");\r\n"
                }
            ],
            "date": 1762537690914,
            "name": "Commit-0",
            "content": "---\r\n\r\n---\r\n\r\n<div class=\"form-container\">\r\n  <h2>Log in</h2>\r\n  <form id=\"form-login\">\r\n    <input type=\"text\" name=\"username\" placeholder=\"Username\" required />\r\n    <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\r\n    <button type=\"submit\">Log in</button>\r\n  </form>\r\n</div>\r\n\r\n<style>\r\n  .form-container {\r\n    padding-top: 5rem;\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n  }\r\n\r\n  #form-signup {\r\n    width: fit-content;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    margin: 0 auto;\r\n    gap: 1rem;\r\n  }\r\n  h2 {\r\n    text-align: center;\r\n  }\r\n</style>\r\n"
        }
    ]
}