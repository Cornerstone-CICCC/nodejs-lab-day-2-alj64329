{
    "sourceFile": "frontend/src/layouts/Layout.astro",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1762537582196,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762537701599,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,8 +46,39 @@\n         } catch (err) {\n           console.error(err);\n         }\n       });\n+\n+\t// Login\n+\tconst loginForm = document.getElementById('form-login') as HTMLFormElement\n+\tloginForm.addEventListener('submit', async (e) => {\n+\t\te.preventDefault()\n+\t\tconst formData = new FormData(loginForm)\n+\t\tconst username = formData.get('username')\n+\t\tconst password = formData.get('password')\n+\n+\t\ttry {\n+\t\t\tconst res = await fetch(\"http://localhost:3500/users/login\", {\n+\t\t\t\tmethod: \"POST\",\n+\t\t\t\tcredentials: \"include\", // include cookies\n+\t\t\t\theaders: {\n+\t\t\t\t\t\"Content-type\": \"application/json\"\n+\t\t\t\t},\n+\t\t\t\tbody: JSON.stringify({\n+\t\t\t\t\tusername,\n+\t\t\t\t\tpassword\n+\t\t\t\t})\n+\t\t\t})\n+\t\t\tconst data = await res.json()\n+\t\t\tif (!res.ok) {\n+\t\t\t\tconsole.error(data.message)\n+\t\t\t\treturn\n+\t\t\t}\n+\t\t\twindow.location.href = \"/profile\" // Redirect to profile page\n+\t\t} catch (err) { // Server is down\n+\t\t\tconsole.error(err)\n+\t\t}\n+\t\t\t})\n     </script>\n   </body>\n </html>\n \n"
                },
                {
                    "date": 1762537886974,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,8 @@\n+---\n+import Header from \"../components/Header.astro\"\n+---\n+\n <!doctype html>\n <html lang=\"en\">\n   <head>\n     <meta charset=\"UTF-8\" />\n@@ -7,8 +11,9 @@\n     <meta name=\"generator\" content={Astro.generator} />\n     <title>Astro Basics</title>\n   </head>\n   <body>\n+\t<Header />\n     <slot />\n     <script>\n       // Sign up\n       const signUpForm = document.getElementById(\n"
                }
            ],
            "date": 1762537582196,
            "name": "Commit-0",
            "content": "<!doctype html>\n<html lang=\"en\">\n\t<head>\n\t\t<meta charset=\"UTF-8\" />\n\t\t<meta name=\"viewport\" content=\"width=device-width\" />\n\t\t<link rel=\"icon\" type=\"image/svg+xml\" href=\"/favicon.svg\" />\n\t\t<meta name=\"generator\" content={Astro.generator} />\n\t\t<title>Astro Basics</title>\n\t</head>\n\t<body>\n\t\t<slot />\n\t\t<script>\n\t\t\t// Sign up\n\t\t\tconst signUpForm = document.getElementById('form-signup') as HTMLFormElement\n\t\t\tsignUpForm.addEventListener('submit', async (e) => {\n\t\t\t\te.preventDefault()\n\t\t\t\tconst formData = new FormData(signUpForm)\n\t\t\t\tconst username = formData.get('username')\n\t\t\t\tconst password = formData.get('password')\n\t\t\t\tconst firstname = formData.get('firstname')\n\t\t\t\tconst lastname = formData.get('lastname')\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await fetch('http://localhost:3000/users/signup', {\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-type\": \"application/json\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\tpassword,\n\t\t\t\t\t\t\tfirstname,\n\t\t\t\t\t\t\tlastname\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\tconst data = await res.json()\n\t\t\t\t\tif (!res.ok) { // Check if status is not success (400, 500, ...)\n\t\t\t\t\t\tconsole.error(data.message)\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\talert(\"Success! You can now log in!\")\n\t\t\t\t\tsignUpForm.reset()\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t}\n\t\t\t})\n\n\t\t</script>\n\t</body>\n</html>\n\n<style>\n\thtml,\n\tbody {\n\t\tmargin: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n"
        }
    ]
}